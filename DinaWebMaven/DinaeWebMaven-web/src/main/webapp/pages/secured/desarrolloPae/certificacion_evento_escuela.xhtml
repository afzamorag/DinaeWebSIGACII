<!DOCTYPE html>
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui">
  <h:form
    id="frmListCertificacion"
    prependId="false">
    <h:outputText 
      value="#{bundle['siedueventoescuela.certificacion.title']}"/>
    <p:panel
      id="pnlCertficacion">
      <p:dataTable 
        id="dtListActas"
        value="#{sieduCertificadoEventoController.list}"
        var="record"
        paginator="true" 
        paginatorPosition="bottom"
        rows="10"
        selectionMode="single" 
        selection="#{sieduCertificadoEventoController.selected}" 
        rowKey="#{record.parePare}"
        reflow="true"
        editable="true">  
        <p:column 
          headerText="#{bundle['siedueventoescuela.certificacion.nrolibro']}">
          <h:outputText 
            value="#{record.parePers.persNroid}"/>
        </p:column>      
        <p:column  headerText="#{bundle['siedueventoescuela.certificacion.folio']}" 
                   sortBy="#{record.parePers.persNombres} #{record.parePers.persApellidos}">
          <h:outputText 
            value="#{record.parePers.persNombres} #{record.parePers.persApellidos}"/>
        </p:column> 
        <p:column 
          headerText="#{bundle['siedueventoescuela.certificacion.acta']}"
          sortBy="#{record.pareEstado}">
          <h:outputText 
            value="#{record.pareEstado}"/>
        </p:column>
        <p:column 
          headerText="#{bundle['siedueventoescuela.certificacion.fecha']}"
          sortBy="#{record.pareEstado}">
          <h:outputText 
            value="#{record.pareEstado}"/>
        </p:column>  
        <p:column headerText="#{bundle['commons.lbl.view.detail']}"
                  rendered="#{sieduEventoEscuelaController.renderButtom}">
          <h:panelGroup>
            <p:commandLink value="#{bundle['commons.btn.report']}" 
                           title="#{bundle['commons.btn.report']}" 
                           actionListener="#{sieduParticipanteEventoController.onDelete(record)}"
                           immediate="true"
                           update=":tvDatos:frmListParticipante :tvDatos:frmListInasistente">
              <f:setPropertyActionListener value="#{record}" target="#{sieduParticipanteEventoController.selected}"/>
              <p:confirm 
                header="#{bundle['commons.cfmdlg.header']}" 
                message="#{bundle['commons.cfmdlg.remove.message']}" 
                icon="ui-icon-alert" />
            </p:commandLink>
          </h:panelGroup>
        </p:column>
      </p:dataTable> 
    </p:panel>        
  </h:form>
  <h:form
    id="frmCertificacion"
    prependId="false">
    <h:outputText 
      value="#{bundle['siedueventoescuela.certificacion.details']}"/>
    <p:separator />
    <p:panel
      id="pnlCertficacionDetail">
      <p:panelGrid
        id="pnlListCertificacion"
        layout="grid" 
        columns="4"
        columnClasses="ui-grid-col-1, ui-grid-col-5, ui-grid-col-2, ui-grid-col-4" 
        styleClass="ui-panelgrid-blank"> 
        <p:outputLabel                        
          value="#{bundle['siedueventoescuela.certificacion.nrolibro']}"
          for="iptnrolibro"/>
        <h:panelGroup>
          <h:outputText
            value="#{sieduCertificadoEventoController.selected.certNroLibro}"
            rendered="#{!sieduEventoEscuelaController.editable}"/>
          <p:inputText 
            id="iptnrolibro" 
            value="#{sieduCertificadoEventoController.selected.certNroLibro}" 
            required="true"
            rendered="#{sieduEventoEscuelaController.editable}">
          </p:inputText>
          <p:message
            for="iptnrolibro"/>
        </h:panelGroup>
        <p:outputLabel                        
          value="#{bundle['siedueventoescuela.certificacion.folio']}"
          for="iptnrofolio"/>
        <h:panelGroup>
          <h:outputText
            value="#{sieduCertificadoEventoController.selected.certNroFolio}"
            rendered="#{!sieduEventoEscuelaController.editable}"/>
          <p:inputText 
            id="iptnrofolio" 
            value="#{sieduCertificadoEventoController.selected.certNroFolio}" 
            required="true"
            rendered="#{sieduEventoEscuelaController.editable}">
          </p:inputText>
          <p:message
            for="iptnrofolio"/>
        </h:panelGroup>
        <p:outputLabel                        
          value="#{bundle['siedueventoescuela.certificacion.acta']}"
          for="iptnroacta"/>
        <h:panelGroup>
          <h:outputText
            value="#{sieduCertificadoEventoController.selected.certNroActa}"
            rendered="#{!sieduEventoEscuelaController.editable}"/>
          <p:inputText 
            id="iptnroacta" 
            value="#{sieduCertificadoEventoController.selected.certNroActa}" 
            required="true"
            rendered="#{sieduEventoEscuelaController.editable}">
          </p:inputText>
          <p:message
            for="iptnroacta"/>
        </h:panelGroup>
        <p:outputLabel                        
          value="#{bundle['siedueventoescuela.certificacion.fecha']}"
          for="iptnrofecha"/>
        <h:panelGroup>
          <h:outputText
            value="#{sieduCertificadoEventoController.selected.certFechaActa}"
            rendered="#{!sieduEventoEscuelaController.editable}">
            <f:convertDateTime type="date" pattern="#{bundle['pattern.default.date']}"/>
          </h:outputText>
          <p:calendar 
            id="iptnrofecha" 
            value="#{sieduCertificadoEventoController.selected.certFechaActa}"
            pattern="#{bundle['pattern.default.date']}"
            readonlyInput="true"
            label="#{bundle['siedueventoescuela.certificacion.fecha']}"
            required="true"
            mindate="#{sieduEventoEscuelaController.selected.eveeFechafin}" 
            rendered="#{sieduEventoEscuelaController.editable}"/>
          <p:message
            for="iptnrofecha"/>
        </h:panelGroup>
      </p:panelGrid>
      <f:facet
        name="footer">
        <p:panelGrid
          columns="3"
          layout="grid" 
          columnClasses="ui-grid-col-2, ui-grid-col-2,ui-grid-col-2" 
          styleClass="ui-panelgrid-blank">                            
          <p:commandButton 
            id="btnCreateCertifica"
            value="#{bundle['commons.btn.save']}"
            title="#{bundle['commons.btn.save']}"
            icon="ui-icon-plus"
            actionListener="#{sieduConvocatoriaEventoController.onSave()}"
            update=":tvDatos:frmCertificacion"/>
          <p:commandButton 
            id="btnCargaCertifica"
            value="#{bundle['commons.btn.cargar']}"
            title="#{bundle['commons.btn.cargar']}"
            icon="ui-icon-plus"
            actionListener="#{sieduCertificadoEventoController.findNotCertified()}"
            update=":tvDatos:frmCertificacion"/> 
        </p:panelGrid>
      </f:facet>
      <p:dataTable 
        id="dtListCertificados"
        value="#{sieduCertificadoEventoController.listParticipante}"
        var="record"
        paginator="true" 
        paginatorPosition="bottom"
        rows="10"
        selectionMode="single" 
        rowKey="#{record.parePare}"
        reflow="true"
        editable="true">  
        <p:column 
          headerText="#{bundle['siedueventoescuela.certificacion.identificacion']}">
          <h:outputText 
            value="#{record.parePers.persNroid}"/>
        </p:column>      
        <p:column  headerText="#{bundle['siedueventoescuela.certificacion.nombres']}" 
                   sortBy="#{record.parePers.persNombres} #{record.parePers.persApellidos}">
          <h:outputText 
            value="#{record.parePers.persNombres} #{record.parePers.persApellidos}"/>
        </p:column> 
        <p:column 
          headerText="#{bundle['siedueventoescuela.certificacion.estado']}"
          sortBy="#{record.pareEstado}">
          <h:outputText 
            value="#{record.pareEstado}"/>
        </p:column> 
      </p:dataTable> 
    </p:panel>
  </h:form>
</ui:composition>
