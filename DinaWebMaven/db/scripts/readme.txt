Modelo de Datos

01_SIEDU_TIPO_DOMINIO
- falta actualizar el script
- cambie el nombre del campo de "DESCRIPCION_DOMINIO" a "DESCRIPCION"
- para q se usa el campo "DEFINICION", no es lo mismo que "DESCRIPCION"

02_SIEDU_DOMINIO
- falta actualizar el script
- cambie el nombre del campo de "DESCRIPCION_DOMINIO" a "DESCRIPCION"

03_SIEDU_ARCHIVO
- ok

04_SIEDU_AUDITORIA
- ok

10_SIEDU_PAE
- ok

11_SIEDU_NOVEDAD_PAE
- ok

12_SIEDU_NECESIDAD
- ok

13_SIEDU_COBERTURA
- ok

14_SIEDU_PAE_CAPACITACION
- ok


15_SIEDU_PAE_FORMACION
- ok

16_SIEDU_CONSOLIDA_PAE
- ok

17_SIEDU_CIERRE_PAE
- ok

18_SIEDU_PAE_FORMA_ESCUELA
- ok

19_SIEDU_FORMA_ESCUELA_COHORTE
- ok

20_SIEDU_EVENTO
- ok

21_SIEDU_TEMA
- ok

22_SIEDU_COMPETENCIA
- ok

23_SIEDU_COMPETENCIA_EVENTO
- ok

24_SIEDU_EVENTO_CATEGORIA
- ok

30_SIEDU_PRESUPUESTO
- ok

31_SIEDU_ENTIDAD
- ok

32_SIEDU_CONVENIO
- ok
Se actualiza por ANDRÉS ZAMORA EL 07/04/2016 DONDE SE AGREGAN LOS CAMPOS: conv_nombre, conve_dom_conv, conve_enti, conv_vigente; SE ACTUALIZA LA UK CON LOS SIGUIENTES CAMPOS: (CONV_NOMBRE,CONVE_DOM_CONV,CONVE_ENTI,conv_fecha_ini)
SE CREA FK CONVENIO_ENTI foreign key (CONVE_ENTI) references SIEDU_ENTIDAD (ENTI_ENTI)

33_SIEDU_EMPLEADO_EXTERNO
- ok

34_SIEDU_PERSONA
- ok

35_SIEDU_EVENTO_ESCUELA
- ok
- Se agrega la llave fóranea SIEDU_EVENTO_ESCU_CONVEN_FK
- Mdperezl Adición campo evee_luggeo_capacita con su respectivo comment.
- Mdperezl Adición CONSTRAINT SIEDU_EVEN_ESCU_LUG_GEO_FK

36_SIEDU_PARTICIPANTE_EVENTO
- ok

37_SIEDU_CONVOCATORIA_EVENTO
- ok

38_SIEDU_DOCENTE_EVENTO
- ok

39_SIEDU_INASISTE_EVENTO
- ok

40_SIEDU_CERTIFICADO_EVENTO
- ok

40_SIEDU_EVALUACION
- Adición campo eval_activada S/N


41_SIEDU_EVAL_PARTICIPANTE
42_SIEDU_EVAL_CATEGORIA
43_SIEDU_EVAL_GRADO
44_SIEDU_PREGUNTA
45_SIEDU_PARAMETRO_EVALUACION
46_SIEDU_EVAL_PREGUNTA
47_SIEDU_EVAL_DESARROLLO

-- Adiciono paquete de apoyo a Triggers de Auditoría
50_SIEDU_QAUDIT.sql

grant references on USR_REHU.GRADOS                to USR_DISIGAC2;
grant references on USR_REHU.CATEGORIAS            to USR_DISIGAC2;
grant references on USR_REHU.UNIDADES_DEPENDENCIA  to USR_DISIGAC2;
grant references on USR_REHU.LUGARES_GEOGRAFICOS   to USR_DISIGAC2;
grant references on USR_REHU.EMPLEADOS             to USR_DISIGAC2;
grant references on USR_REHU.CARGOS                to USR_DISIGAC2;
grant references on USR_EDUC.NIVELES_ACADEMICOS    to USR_DISIGAC2;
grant references on USR_EDUC.CARRERAS              to USR_DISIGAC2;

alter sequence SIEDU_EMPLEADO_EXTERNO_SEQ NOCACHE;
alter sequence SIEDU_ARCHIVO_SEQ            NOCACHE;
alter sequence SIEDU_AUDITORIA_SEQ           NOCACHE;
alter sequence SIEDU_CERTIFICADO_EVENTO_SEQ  NOCACHE;
alter sequence SIEDU_CIERRE_PAE_SEQ          NOCACHE;
alter sequence SIEDU_COBERTURA_SEQ           NOCACHE;
alter sequence SIEDU_COMPETENCIA_EVENTO_SEQ  NOCACHE;
alter sequence SIEDU_COMPETENCIA_SEQ         NOCACHE;
alter sequence SIEDU_CONSOLIDA_PAE_SEQ       NOCACHE;
alter sequence SIEDU_CONVENIO_SEQ            NOCACHE;
alter sequence SIEDU_CONVOCATORIA_EVENTO_SEQ NOCACHE;
alter sequence SIEDU_DOCENTE_EVENTO_SEQ      NOCACHE;
alter sequence SIEDU_ENTIDAD_SEQ             NOCACHE;
alter sequence SIEDU_EVALUACION_SEQ          NOCACHE;
alter sequence SIEDU_EVENTO_CATEGORIA_SEQ    NOCACHE;
alter sequence SIEDU_EVENTO_ESCUELA_SEQ      NOCACHE;
alter sequence SIEDU_EVENTO_SEQ              NOCACHE;
alter sequence SIEDU_FORMA_ESCUELA_CORTE_SEQ NOCACHE;
alter sequence SIEDU_INASISTE_EVENTO_SEQ     NOCACHE;
alter sequence SIEDU_NECESIDAD_SEQ           NOCACHE;
alter sequence SIEDU_NOVEDAD_PAE_SEQ         NOCACHE;
alter sequence SIEDU_PAE_CAPACITACION_SEQ    NOCACHE;
alter sequence SIEDU_PAE_FORMACION_SEQ       NOCACHE;
alter sequence SIEDU_PAE_FORMA_ESCUELA_SEQ   NOCACHE;
alter sequence SIEDU_PAE_SEQ                 NOCACHE;
alter sequence SIEDU_PARTICIPANTE_EVENTO_SEQ NOCACHE;
alter sequence SIEDU_PERSONA_SEQ             NOCACHE;
alter sequence SIEDU_PRESUPUESTO_SEQ         NOCACHE;
alter sequence SIEDU_TEMA_SEQ                NOCACHE;


- Solicitar la ejecución del comando:
GRANT CREATE TRIGGER TO USR_DISIGAC2;

--Ajuste obligatoriedad en tabla de Auditoría
alter table siedu_auditoria modify audi_regantes null; 

-- AJUSTES COLUMNAS ESTADO
-- SIEDU_PAE
ALTER TABLE SIEDU_PAE MODIFY PAE_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_PAE DROP CONSTRAINT SIEDU_PAE_ESTADO_CK;
ALTER TABLE SIEDU_PAE ADD CONSTRAINT SIEDU_PAE_ESTADO_CK CHECK (pae_estado IN ('ABIERTO', 'CERRADO')) ;

-- SIEDU_NOVEDAD_PAE
ALTER TABLE SIEDU_NOVEDAD_PAE MODIFY NOVE_PROCEDI VARCHAR2(30);
ALTER TABLE SIEDU_NOVEDAD_PAE ADD CONSTRAINT SIEDU_NOVE_PAE_PROCE_CK CHECK (nove_procedi IN ('CONSTRUCCIÓN', 'CIERRE', 'MODIFICACIÓN')) ;

-- SIEDU_PAE_FORMACION
ALTER TABLE SIEDU_PAE_FORMACION MODIFY FORM_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_PAE_FORMACION DROP CONSTRAINT SIEDU_PAE_FORMACION_ESTADO_CK;
ALTER TABLE SIEDU_PAE_FORMACION ADD CONSTRAINT SIEDU_PAE_FORMACION_ESTADO_CK CHECK (form_estado IN ('PENDIENTE','APROBADO','NO APROBADO')) ;

-- SIEDU_PAE_CAPACITACION
ALTER TABLE SIEDU_PAE_CAPACITACION MODIFY CAPA_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_PAE_CAPACITACION DROP CONSTRAINT SIEDU_PAE_CAPACITA_ESTADO_CK;
ALTER TABLE SIEDU_PAE_CAPACITACION ADD CONSTRAINT SIEDU_PAE_CAPACITA_ESTADO_CK CHECK (capa_estado IN ('APROBADO', 'PENDIENTE', 'NO APROBADO')) ;

-- SIEDU_NECESIDAD
ALTER TABLE SIEDU_NECESIDAD MODIFY NECE_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_NECESIDAD DROP CONSTRAINT SIEDU_NECESIDAD_ESTADO;
ALTER TABLE SIEDU_NECESIDAD ADD CONSTRAINT SIEDU_NECESIDAD_ESTADO CHECK (nece_estado IN ('APROBADO', 'PENDIENTE', 'NO APROBADO')) ;

-- SIEDU_EVENTO
ALTER TABLE SIEDU_EVENTO MODIFY EVEN_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_EVENTO ADD CONSTRAINT SIEDU_EVENTO_ESTADO CHECK (even_estado IN ('PENDIENTE', 'FINALIZADO')) ; 
-- update SIEDU_EVENTO set EVEN_ESTADO = NULL; 
-- alter table siedu_evento drop column EVEN_ESTADO;
-- ALTER TABLE SIEDU_EVENTO ADD EVEN_ESTADO VARCHAR2(30); 
-- update SIEDU_EVENTO set EVEN_ESTADO = 'PENDIENTE'; 
-- ALTER TABLE SIEDU_EVENTO ADD CONSTRAINT SIEDU_EVENTO_ESTADO CHECK (even_estado IN ('PENDIENTE', 'FINALIZADO')) ; 
-- ALTER TABLE SIEDU_EVENTO MODIFY EVEN_ESTADO VARCHAR2(30) NOT NULL;   


-- SIEDU_PARTICIPANTE_EVENTO
ALTER TABLE SIEDU_PARTICIPANTE_EVENTO MODIFY PARE_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_PARTICIPANTE_EVENTO DROP CONSTRAINT SIEDU_PARTICIP_EVEN_ESTADO_CK;
ALTER TABLE SIEDU_PARTICIPANTE_EVENTO ADD CONSTRAINT SIEDU_PARTICIP_EVEN_ESTADO_CK CHECK (pare_estado IN ( 'APROBADO', 'PENDIENTE', 'NO APROBADO', 'DESERTADO')) ;

-- SIEDU_EVALUACION
ALTER TABLE SIEDU_EVALUACION MODIFY EVAL_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_EVALUACION DROP CONSTRAINT SIEDU_EVALUACION_ESTADO_CK;
ALTER TABLE SIEDU_EVALUACION ADD CONSTRAINT SIEDU_EVALUACION_ESTADO_CK CHECK (eval_estado IN ( 'PENDIENTE', 'ACTIVA', 'INACTIVA' )) ;

-- SIEDU_EVAL_PARTICIPANTE
ALTER TABLE SIEDU_EVAL_PARTICIPANTE MODIFY EVPA_ESTADO VARCHAR2(30);
ALTER TABLE SIEDU_EVAL_PARTICIPANTE DROP CONSTRAINT SIEDU_EVAL_PARTICI_ESTADO_CK;
ALTER TABLE SIEDU_EVAL_PARTICIPANTE ADD CONSTRAINT SIEDU_EVAL_PARTICI_ESTADO_CK CHECK (evpa_estado IN ( 'ACTIVA', 'INACTIVA', 'DESARROLLADA' )) ;

---------- AJUSTES ELIMINACIÓN SIEDU_PREGUNTA

alter table siedu_eval_pregunta drop constraint SIEDU_EVAL_PREGUNTA_PREG_FK;
alter table siedu_eval_pregunta drop constraint SIEDU_EVAL_PREGUNTA_PK;
alter table siedu_eval_pregunta drop column EVPRE_PREG;
alter table siedu_eval_pregunta add evpre_peval_preg   NUMBER (8) NOT NULL;
ALTER TABLE SIEDU_EVAL_PREGUNTA ADD CONSTRAINT SIEDU_EVAL_PREG_PEVAL_PREG_FK FOREIGN KEY ( evpre_peval_preg ) REFERENCES SIEDU_PARAMETRO_EVALUACION ( peval_peval ) ;
ALTER TABLE SIEDU_EVAL_PREGUNTA ADD CONSTRAINT SIEDU_EVAL_PREGUNTA_PK PRIMARY KEY ( evpre_eval, evpre_peval_preg ) ;
alter table siedu_eval_pregunta add evpre_peval_aspec  NUMBER (8);
ALTER TABLE SIEDU_EVAL_PREGUNTA ADD CONSTRAINT SIEDU_EVAL_PREG_PEVAL_ASPEC_FK FOREIGN KEY ( evpre_peval_aspec ) REFERENCES SIEDU_PARAMETRO_EVALUACION ( peval_peval ) ;
drop table siedu_pregunta;
alter table SIEDU_PARAMETRO_EVALUACION add peval_dom_tipo NUMBER (4) NOT NULL;

COMMENT ON COLUMN SIEDU_EVAL_PREGUNTA.evpre_peval_preg IS 'Secuencial del Parámetro de Evaluación- Pregunta dentro de la Evaluación' ;
COMMENT ON COLUMN SIEDU_EVAL_PREGUNTA.evpre_peval_aspec IS 'Parámetro de Evaluación - Aspecto en la Evaluación' ;
COMMENT ON TABLE SIEDU_PARAMETRO_EVALUACION IS 'Tabla de Parámetros de Evaluación. Contiene Preguntas, Aspectos, Factores, de acuerdo a la columna tipo que viene del domino correspondiente' ;


----------- Ajuste hablado con Juan Carlos Cifuentes Abril 23 de 2016, ejecutado por él mismo.

ALTER TABLE SIEDU_EVENTO DROP CONSTRAINT SIEDU_EVENTO_ESTADO;
ALTER TABLE SIEDU_EVENTO ADD CONSTRAINT SIEDU_EVENTO_ESTADO CHECK (even_estado IN ('PENDIENTE', 'VIGENTE' 'NOVIGENTE')) ; 

Comment on colum SIEDU_EVENTO.even_estado is 'Estado del Programa de Capacitación PENDIENTE, VIGENTE, NO VIGENTE';

--------- Ajustes al crear procedimiento de consolidación para Capacitación 30/04/2016 Manuel Perez

alter table SIEDU_PAE_CAPACITACION   add capa_ude_fuerza_escu     NUMBER (1)      NOT NULL;
alter table SIEDU_PAE_CAPACITACION   add capa_fuerza_carrera      NUMBER (1)      NOT NULL;    

alter table SIEDU_PAE_CAPACITACION modify   capa_total_personas      NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_total_eventos       NUMBER (4)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_dom_modal           NUMBER (4)      NULL;
alter table SIEDU_PAE_CAPACITACION modify   capa_dom_ppto            NUMBER (4)      NULL;
alter table SIEDU_PAE_CAPACITACION modify   capa_even_t1             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_pers_t1             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_even_t2             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_pers_t2             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_even_t3             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_pers_t3             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_even_t4             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_pers_t4             NUMBER (6)      default 0;
alter table SIEDU_PAE_CAPACITACION modify   capa_externo             VARCHAR2(1) default 'N';

Comment on column SIEDU_PAE_CAPACITACION.capa_externo is 'SIndica si la Capacitación es impartida por una entidad externa (S/N)';
alter table SIEDU_PAE_CAPACITACION add constraint SIEDU_PAE_CAPACITA_EXTERNO_CK CHECK ( capa_externo in ('SI', 'NO');
ALTER TABLE SIEDU_PAE_CAPACITACION DROP CONSTRAINT SIEDU_PAE_CAPACITA_UK;
ALTER TABLE SIEDU_PAE_CAPACITACION ADD CONSTRAINT SIEDU_PAE_CAPACITA_UK UNIQUE ( capa_pae , capa_ude_fuerza_escu , capa_ude_escu , capa_fuerza_carrera, capa_id_carrera , capa_dom_modal , capa_dom_proce , capa_dom_estra ) ;


COMMENT ON COLUMN SIEDU_PAE_CAPACITACION.capa_estado
IS  'Estado de registro del PAE Capacitación. APROBADO, PENDIENTE, NO APROBADO.' ;

COMMENT ON COLUMN SIEDU_PAE_FORMACION.form_estado
IS  'Estado del registro de necesidad de formación. PENDIENTE, APROBADO, NO APROBADO' ;

alter table siedu_pae_formacion modify   form_estado  VARCHAR2 (30)   NOT NULL;
ALTER TABLE SIEDU_PAE_FORMACION drop CONSTRAINT SIEDU_PAE_FORMACION_CARRERA_UK;
ALTER TABLE SIEDU_PAE_FORMACION ADD CONSTRAINT SIEDU_PAE_FORMACION_CARRERA_UK UNIQUE ( form_pae , form_fuerza , form_id_carrera, form_dom_proce, form_dom_estra ) ;

ALTER TABLE SIEDU_EMPLEADO_EXTERNO modify empe_tipoId NUMBER(4) NOT NULL;
ALTER TABLE SIEDU_PERSONA modify pers_tpoid NUMBER(4);
COMMENT ON COLUMN SIEDU_PERSONA.pers_tpoid IS  'Tipo de Identificación de la Persona.  DOMINIO (TIPO IDENTIFICACION)' ;
COMMENT ON COLUMN SIEDU_EMPLEADO_EXTERNO.empe_tipoId IS  'Tipo Documento de Identificacion. DOMINIO (TIPO IDENTIFICACION)' ;

---Ajuste de laves únicas 20160517

ALTER TABLE SIEDU_EVENTO ADD CONSTRAINT SIEDU_EVENTO_UK UNIQUE ( even_id_carrera , even_dom_modal , even_dom_proce , even_fuerza , even_estado ) ;
ALTER TABLE SIEDU_EVENTO_CATEGORIA ADD CONSTRAINT SIEDU_EVENTO_CATEGORIA_UK UNIQUE ( evca_even , evca_categoria_id , evca_fuerza ) ;
ALTER TABLE SIEDU_TEMA ADD CONSTRAINT SIEDU_TEMA_UK UNIQUE ( tema_even , tema_descri , tema_tema_padre ) ;

ALTER TABLE SIEDU_EMPLEADO_EXTERNO modify empe_tipoId VARCHAR2(2);
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXTERNO_UK UNIQUE ( empe_nroId , empe_tipoId ) ;

ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXTERNO_CK CHECK (empe_tipoId          IN ( 'NU','RC','CC','NR','TI','CE' )) ;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXT_GRPSANG_CK CHECK (empe_grupo_sang  IN ( 'A','NR','O','B','AB' )) ;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXT_FACRH_CK CHECK (empe_factorrh      IN ('PO','NE','NR')) ;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXT_ESTCIV_CK CHECK (empe_estado_civil IN ('CA','UL','SO','VI','DI','SE','NR')) ;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXT_SEXO_CK CHECK (empe_sexo           IN ('MA','NR','FE')) ;

--- Ajuste de Tabla SIEDU_PAE
alter table siedu_pae add pae_nece_ya_importada VARCHAR2 (2) default 'NO' NOT NULL;
alter table siedu_pae add constraint siedu_pae_nece_importada_ck check ( pae_nece_ya_importada IN ( 'SI', 'NO' ) );
COMMENT ON COLUMN SIEDU_PAE.pae_nece_ya_importada IS 'Indica si los registros de necesidad externa ya han sido importados para esta vigencia.' ;

--- Ajustes tabla SIEDU_EVALUACION 2016/05/25

ALTER TABLE SIEDU_EVALUACION drop CONSTRAINT SIEDU_EVALUACION_ACTIVADA_CK;
alter table SIEDU_EVALUACION drop column eval_activada;
alter table SIEDU_EVALUACION  add eval_aplicada  VARCHAR2(1) DEFAULT 'N';
ALTER TABLE SIEDU_EVALUACION ADD CONSTRAINT SIEDU_EVALUACION_APLICADA_CK CHECK (eval_aplicada IN ('S', 'N'));
COMMENT ON COLUMN SIEDU_EVALUACION.eval_aplicada IS 'Indica si para la Evaluación ya hay o ha habido participantes.' ;

ALTER TABLE SIEDU_EVAL_DESARROLLO DROP CONSTRAINT SIEDU_EVAL_DESA_VALOR_CK;
ALTER TABLE SIEDU_EVAL_DESARROLLO ADD CONSTRAINT SIEDU_EVAL_DESA_VALOR_CK CHECK (evde_valor IN ( 1, 2, 3, 4, 5 )) ;

ALTER TABLE SIEDU_NOVEDAD_PAE MODIFY (NOVE_NRO_DOC VARCHAR2(30) );

----- Ajustes 20160528

ALTER TABLE SIEDU_DOCENTE_EVENTO ADD CONSTRAINT SIEDU_DOCENTE_EVENTO_UK UNIQUE ( doce_evee , doce_tema , doce_pers ) ;
ALTER TABLE SIEDU_PARAMETRO_EVALUACION ADD CONSTRAINT SIEDU_PARAMETRO_EVALUACION_UK UNIQUE ( peval_descri ) ;

ALTER TABLE SIEDU_PERSONA drop column pers_tpoid ;
ALTER TABLE SIEDU_PERSONA add pers_tpoid VARCHAR2(2);
update siedu_persona set pers_tpoid='CC';
COMMENT ON COLUMN SIEDU_PERSONA.pers_tpoid IS  'Tipo de Identificación de la Persona. CC-CEDULA DE CIUDADANIA,CD-CARTA DENTAL,CE-CEDULA EXTRANJERIA,LM-LIBRETA MILITAR,NI-NUMERO IDENTIFICACION TRIBUTARIA,NR-NO REPORTADO,PA-PASAPORTE,PJ-PERSONERIA JURIDICA,RM-REGISTRO MERCANTIL,TD-TARJETA DECADACTILAR,TI-TARJETA IDENTIDAD,TP-TARJETA PROFESIONAL,TS-TARJETA SEGURO SOCIAL,RC-REGISTRO CIVIL,NU-NUMERO UNICO DE IDENTIFICACION PERSONAL,CM-CARNET DIPLOMATICO' ;

ALTER TABLE SIEDU_PERSONA ADD CONSTRAINT SIEDU_PERSONA_TPOID_CK CHECK (pers_tpoid IN ('CC','CD','CE','LM','NI','NR','PA','PJ','RM','TD','TI','TP','TS','RC','NU','CM' )) ;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO DROP CONSTRAINT SIEDU_EMPLEADO_EXTERNO_CK;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXTERNO_CK CHECK (empe_tipoId          IN ( 'CC','CD','CE','LM','NI','NR','PA','PJ','RM','TD','TI','TP','TS','RC','NU','CM' )) ;
COMMENT ON COLUMN SIEDU_EMPLEADO_EXTERNO.empe_tipoId
IS
  'Tipo Documento de Identificacion.CC-CEDULA DE CIUDADANIA,CD-CARTA DENTAL,CE-CEDULA EXTRANJERIA,LM-LIBRETA MILITAR,NI-NUMERO IDENTIFICACION TRIBUTARIA,NR-NO REPORTADO,PA-PASAPORTE,PJ-PERSONERIA JURIDICA,RM-REGISTRO MERCANTIL,TD-TARJETA DECADACTILAR,TI-TARJETA IDENTIDAD,TP-TARJETA PROFESIONAL,TS-TARJETA SEGURO SOCIAL,RC-REGISTRO CIVIL,NU-NUMERO UNICO DE IDENTIFICACION PERSONAL,CM-CARNET DIPLOMATICO'' ;' ;


ALTER TABLE SIEDU_EMPLEADO_EXTERNO DROP CONSTRAINT SIEDU_EMPLEADO_EXT_SEXO_CK;
ALTER TABLE SIEDU_EMPLEADO_EXTERNO ADD CONSTRAINT SIEDU_EMPLEADO_EXT_SEXO_CK CHECK (empe_sexo IN ('BI','HF','FE','MA','NR','HM')) ;
COMMENT ON COLUMN SIEDU_EMPLEADO_EXTERNO.empe_sexo IS 'Sexo del Empleado. BI-Bisexual,HF-Homosexual Femenino,FE-Femenino,MA-Masculino,NR-No Reportado,HM-Homosexual Masculino' ;

------Ajustes 20160206

ALTER TABLE SIEDU_INASISTE_EVENTO ADD CONSTRAINT SIEDU_INASISTE_EVENTO_UK UNIQUE ( inae_pare , inae_fecha ) ;
ALTER TABLE SIEDU_INASISTE_EVENTO ADD CONSTRAINT SIEDU_INASI_EVEN_PARTI_FK FOREIGN KEY ( inae_pare ) REFERENCES SIEDU_PARTICIPANTE_EVENTO ( pare_pare ) ;

------ Ajuste 20160606

ALTER TABLE SIEDU_EVENTO_ESCUELA add EVEE_NRO_DESERTADOS NUMBER(6) NULL;
Comment on column SIEDU_EVENTO_ESCUELA.evee_nro_desertados is 'Campo calculado por el sistema, realiza la sumatoria de la información de participantes definidos en la Convocatoria y que tengan estado Desertado.';

------- Ajuste 20160612

-- Desactivar UK SIEDU_EVENTO_UK

alter table SIEDU_EVENTO drop constraint SIEDU_EVENTO_UK;
drop index SIEDU_EVENTO_UK;

-- Eliminar campo eve_nro_presentados de SIEDU_EVENTO_ESCUELA

alter table SIEDU_EVENTO_ESCUELA drop column eve_nro_presentados;

-- agregar UK a la tabla SIEDU_EVALUACION con los campos EVAL_EVEN y EVAL_ESTADO

ALTER TABLE SIEDU_EVALUACION ADD CONSTRAINT SIEDU_EVALUACION_EVEN_UK UNIQUE ( eval_even , eval_estado ) ;

select eval_even , eval_estado, count(*) n from SIEDU_EVALUACION 
group by eval_even , eval_estado;

-- agregar el campo CERT_CONSECU_FOLIO number(6) en la tabla SIEDU_CERTIFICADO_EVENTO

alter table SIEDU_CERTIFICADO_EVENTO add cert_consecu_folio NUMBER (6) NOT NULL;

COMMENT ON COLUMN SIEDU_CERTIFICADO_EVENTO.cert_consecu_folio IS 'Número consecutivo de folio.' ;

-- campo EVEE_EVAL en la tabla SIEDU_EVENTO_ESCUELA foráneo de SIEDU_EVALUACION

alter table SIEDU_EVENTO_ESCUELA add evee_eval              NUMBER (8);
COMMENT ON COLUMN SIEDU_EVENTO_ESCUELA.evee_eval IS ' Evaluación que fue desarrollada para el evento' ;

ALTER TABLE SIEDU_EVENTO_ESCUELA ADD CONSTRAINT SIEDU_EVENTO_ESCU_EVAL_FK FOREIGN KEY ( evee_eval ) REFERENCES SIEDU_EVALUACION ( eval_eval ) ;
